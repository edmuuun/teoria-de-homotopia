\section{Categorias livres}

Comumente representamos uma categoria por meio de um grafo orientado tendo os objetos da categoria como vértices e os morfismos da categoria como arestas.
Apesar dessa representação bastante útil, uma categoria possui mais estrutura do que um mero grafo orientado, visto que podemos compor os morfismos de uma categoria para obtermos novos morfismos, mas não existe uma operação análoga de composição das arestas de um grafo.
Mais precisamente, toda categoria possui um grafo orientado \emph{subjacente} que esquece da estrutura algébrica da composição.
Os leitores com alguma experiência em Teoria de Categorias já devem esperar que exista também uma construção no sentido contrário por meio da qual um grafo orientado dá origem a uma categoria obtida pela adição da forma mais simples possível de morfismos que representem a composição das arestas do grafo.
A categoria assim obtida é a chamada \emph{categoria livre} gerada pelo grafo, e essa construção é o objetivo central desta seção.

Antes de continuarmos, cabe aqui um aviso sobre terminologia.
O termo \emph{grafo} é particularmente carregado na literatura matemática, e por esse motivo escolhemos usar daqui em diante o termo \emph{aljava} (tradução do inglês \emph{quiver}) no lugar de grafo orientado.

\begin{defin}\label{defin:aljava}
    Uma \textbf{aljava} consiste de uma tupla $(V,A,s,t)$, onde $V$ e $A$ são conjuntos, e $s,\,t: A \to V$ são funções.
\end{defin}

Dada uma aljava $(V,A,s,t)$, os elementos de $V$ são chamados de \textbf{vértices} da aljava, enquanto os elementos de $A$ são chamados de \textbf{arestas} da aljava.
As funções $s$ e $t$ são chamadas de funções \textbf{source} e \textbf{target}, respectivamente.
Visualmente, cada elemento $e \in A$ deve ser visualizado como uma aresta direcionada começando no vértice $s(e)$ e terminando no vértice $t(e)$.
Por vezes será mais conveniente denotarmos uma aljava simplesmente por uma letra como $Q$, e caso seja necessário nos referirmos às estruturas constituintes dessa aljava, usaremos então notações como $V(Q)$, $A(Q)$, $s_Q$ e $t_Q$.

\begin{exem}\label{exem:aljava_discreta}
    Um conjunto $X$ pode ser usado para definir uma aljava $QX$ dada pela tupla $QX \coloneqq (X,X,\id_X,\id_X)$.
    Visualmente, tal aljava possui um vértice para cada elemento $x \in X$ e também uma aresta direcionada desse elemento para si mesmo formando um laço.
    A aljava $QX$ assim definida é chamada de \textbf{aljava discreta} gerado por $X$.
\end{exem}

\begin{exem}\label{exem:aljava_via_relacao}
    Seja $R \subseteq X \times X$ uma relação qualquer em um conjunto $X$.
    Podemos construir a partir dessa relação uma aljava $Q \coloneqq (X,R,s,t)$, onde $s,\,t: R \to X$ são as restriçõs das projeções canônicas associadas ao produto $X \times X$, ou seja, $s(x_1,x_2) \coloneqq x_1$ e $t(x_1,x_2) \coloneqq x_2$ para qualquer par $(x_1,x_2) \in R$.

    É especialmente comum considerarmos essa construção no caso em que a relação $R$ é uma pré-ordem $\leq$ no conjunto $X$, ou seja, uma relação reflexiva e transitiva.
    Nesse caso, as arestas da aljava``acompanham o sentido de crescimento'' da pré-ordem $\leq$.
\end{exem}

\begin{exem}\label{exem:aljava_oposta}
    Toda aljava $Q=(V,A,s,t)$ dá origem a uma \textbf{aljava oposta} $Q^{\mathsf{op}}$ definida pela tupla $(V,A,t,s)$.
    Visualmente, $Q^{\mathsf{op}}$ possui os mesmos vértices de $Q$, mas com as arestas indo no sentido oposto.
\end{exem}

\begin{exem}\label{exem:aljava_via_espaco}
    Seja $X$ um espaço topológico qualquer, e considere o conjunto\footnote{É verdade que também podemos considerar $X^I$ como um espaço equipado com a topologia compacto-aberto, por exemplo, mas aqui não existe essa necessidade.} $X^I$ formado por todas as funções contínuas do tipo $I \to X$, onde $I$ denota o intervalo unitário $[0,1]$.
    Podemos considerar as funções de avaliação $e_0,\, e_1: X^I \to X$ dadas por $e_0(\gamma) \coloneqq \gamma(0)$ e $e_1(\gamma) \coloneqq \gamma(1)$ para todo $\gamma \in X^{I}$.
    A tupla $PX \coloneqq (X,X^I,e_0,e_1)$ define então a \textbf{aljava de caminhos} do espaço $X$.
\end{exem}

\begin{exem}\label{exem:aljava_subjacente_categoria}
    Seja $\mathsf{C}$ uma categoria pequena.
    Se $\dom,\,\cod: \Mor(\mathsf{C}) \to \mathsf{C}$ são as funções que associam a cada morfismo de $\mathsf{C}$ seu domínio e codomínio, respectivamente, então a tupla $U(\mathsf{C}) \coloneqq (\mathsf{C},\Mor(\mathsf{C}),\dom,\cod)$ define a \textbf{aljava subjacente à categoria} $\mathsf{C}$.
\end{exem}

\begin{defin}\label{defin:morfismo_aljavas}
    Dadas duas aljavas $Q_1$ e $Q_2$, um \textbf{morfismo de aljavas} do tipo $Q_1 \to Q_2$ é por definição um par de funções $(f: V(Q_1) \to V(Q_2),\, F: A(Q_1) \to A(Q_2))$ satisfazendo as igualdades $s_{Q_2} \circ F = f \circ s_{Q_1}$ e $t_{Q_2} \circ F = f \circ t_{Q_1}$.
\end{defin}

\begin{exem}
    Dados dois conjuntos $X_1$ e $X_2$ e uma função $f: X_1 \to X_2$, o par $(f,f)$ define um morfismo $QX_1 \to QX_2$ entre as aljavas discretas geradas por $X_1$ e $X_2$ de acordo com o \cref{exem:aljava_discreta}.
\end{exem}

\begin{exem}
    Sejam $(X_1,R_1)$ e $(X_2,R_2)$ dois conjuntos equipados com relações, e suponha que $f: X_1 \to X_2$ seja uma função que respeita as relações, ou seja, se $(x,x') \in R_1$, então $(f(x),f(x')) \in R_2$.
    Considere as aljavas $Q_1$ e $Q_2$ associados às relações $R_1$ e $R_2$, respectivamente, conforme discutido no \cref{exem:aljava_via_relacao}.
    Como $f$ respeita as relações $R_1$ e $R_2$, a função produto $f \times f: X_1 \times X_1 \to X_2 \times X_2$ satisfaz $(f \times f)(R_1) \subseteq R_2$, portanto podemos considerar a função restrita
    \begin{displaymath}
        f \times f \rvert_{R_1}: R_1 \to R_2.
    \end{displaymath}
    O par de funções $(f,f \times f\rvert_{R_1})$ define então um morfismo de aljavas do tipo $Q_1$ para $Q_2$.

    No caso em que $R_1$ e $R_2$ são relações de pré-ordem $\leq_1$ e $\leq_2$, a condição de $f$ respeitar as relações diz que, se $x \leq_1 x'$, então $f(x) \leq_2 f(x')$; ou seja, $f$ é uma função monótona.
    Segue da discussão acima que funções monótonas entre conjuntos pré-ordenados dão origem a morfismos entre as aljavas obtidas a partir deles.
\end{exem}

\begin{exem}
    Uma função contínua $f: X \to Y$ entre espaços topológicos dá origem a uma função de pushforward $X^f: X^I \to Y^{I}$ definida por $X^f(\gamma) \coloneqq f \circ \gamma$ para todo $\gamma \in X^{I}$.
    O par $(f,X^f)$ define então um morfismo aljavas
    \begin{displaymath}
        (f,X^f): (X,X^I,e^X_0,e^X_1) \to (Y,Y^I,e^Y_0,e^Y_1)
    \end{displaymath}
    entre as alajvas de caminhos definidas no \cref{exem:aljava_via_espaco}.
    De fato, para qualquer $\gamma \in X^I$ por um lado temos
    \begin{displaymath}
        e^Y_0(X^f(\gamma)) = e^Y_0(f \circ \gamma) = f(\gamma(0)) = f(e^X_0(\gamma)),
    \end{displaymath}
    enquanto por outro temos
    \begin{displaymath}
        e^Y_1(X^f(\gamma)) = e^Y_1(f \circ \gamma) = f(\gamma(1)) = f(e^X_1(\gamma)).
    \end{displaymath}
\end{exem}

\begin{exem}\label{exem:funtor_induz_morfismo_de_aljavas}
    Lembre-se que um funtor $F: \mathsf{C} \to \mathsf{D}$ é dado por uma função $F: \mathsf{C} \to \mathsf{D}$ a nível de objetos e também por uma função $\Mor(F): \Mor(\mathsf{C}) \to \Mor(\mathsf{D})$ a nível de morfismos a qual é compatível com as funções de domínio e codomínio de cada uma das categorias e também com as respectivas operações de composição.
    A compatibilidade com as funções de domínio e codomínio, em particular, faz com que o par $(F,\Mor(F))$ defina um morfismo do tipo $U(\mathsf{C}) \to U(\mathsf{D})$ entre as aljavas subjacentes às categorias discutidas no \cref{exem:aljava_subjacente_categoria}.
\end{exem}

Dois morfismos de aljavas $(f_1,F_1): Q_1 \to Q_2;$ e $(f_2,F_2): Q_2 \to Q_3$ podem ser compostos para definir um outro morfismo de aljavas $(f_2,F_2) \circ (f_1,F_1): Q_1 \to Q_3$ pela regra
\begin{displaymath}
    (f_2,F_2) \circ (f_1,F_1) \coloneqq (f_2 \circ f_1,F_2 \circ F_1).
\end{displaymath}
Além disso, toda aljava $Q$ tem associada a ela um morfismo identidade $\id_Q: Q \to Q$ dado pelo par $(\id_{V(Q)},\id_{A(Q)})$.
Uma conta simples mostra que o morfismo $\id_Q$ realmente age como uma identidade para a composição de morfismos de grafos orientados introduzida acima.
Em resumo, temos uma categoria $\mathsf{Alj}$ formada por aljavas e morfismos entre elas
Diversas das construções introduzidas nos exemplos anteriores podem ser estendidas para funtores definidos na categoria $\mathsf{Alj}$, ou então tomando valores nela.

\begin{exem}
    Considere a categoria $\mathsf{SetRel}$ cujos objetos são conjuntos equipados com alguma relação e cujos morfismos são funções preservando tais relações.\footnote{É tentador usar o nome $\mathsf{Rel}$ para tal categoria, mas é comum na literatura usar esse nome para identificar a categoria onde relações aparecem como \emph{morfismos} entre conjuntos.}
    Vimos no \cref{exem:aljava_via_relacao} que todo conjunto equipado com uma relação $(X,\leq)$ dá origem a uma aljava, e que funções preservando tais relações dão origem a morfismos entre as aljavas correspondentes.
    Uma conta simples mostra que essa construção preserva composições e morfismos identidade, definindo portanto um funtor $F: \mathsf{SetRel} \to \mathsf{Alj}$.

    Existe também um funtor no sentido contrário $\mathsf{Alj} \to \mathsf{SetRel}$.
    Dada uma aljava $Q$, definimos uma relação $R_Q$ no conjunto de vértices $V(Q)$ da aljava por meio da fórmula
    \begin{displaymath}
        R_Q \coloneqq \{(u,v) \in V(Q) \times V(Q) \mid s_Q(e) = u \text{ e } t_Q(e) = v \text{ para alguma aresta } e \in A(Q)\}.
    \end{displaymath}
    Note também que, se $(f,F): Q_1 \to Q_2$ é um morfismo de aljavas, então a função a nível dos vértices $f: V(Q_1) \to V(Q_2)$ preservas as relações $R_{Q_1}$ e $R_{Q_2}$.
    De fato, se $(u,v) \in R_{Q_1}$, então existe alguma aresta $e \in A(Q_1)$ tal que $s_{Q_1}(e) = u$ e $t_{Q_1}(e) = v$.
    Note então que pelas condições de compatibilidade entre $f$, $F$ e as funções source e target das aljavas temos
    \begin{displaymath}
        s_{Q_2}(F(e)) = f(s_{Q_1}(e)) = f(u)
        \quad \text{e} \quad
        t_{Q_2}(F(e)) = f(t_{Q_1}(e)) = f(v),
    \end{displaymath}
    portanto $(f(u),f(v)) \in R_{Q_2}$.
    Isso nos permite então definir um funtor $\mathsf{Alj} \to \mathsf{SetRel}$ como mencionado.
\end{exem}

\begin{exem}\label{exem:funtor_esquecimento_cat_aljava}
    Vimos no \cref{exem:aljava_subjacente_categoria} que toda categoria pequena $\mathsf{C}$ possui uma aljava subjacente $U(\mathsf{C})$ e vimos também no \cref{exem:funtor_induz_morfismo_de_aljavas} que um funtor $F: \mathsf{C} \to \mathsf{D}$ induz um morfismo $U(F) \coloneqq (F,\Mor(F)): U(\mathsf{C}) \to U(\mathsf{D})$ entre as aljavas subjacentes.
    Essas duas construções combinadas nos permitem definir um \emph{funtor de esquecimento} $U: \mathsf{Cat} \to \mathsf{Alj}$ definido na categoria de categorias pequenas e tomando valores na categoria de aljavas.
    Usamos o termo funtor de esquecimento pois ao passar da categoria $\mathsf{C}$ para sua aljava subjacente $U(\mathsf{C})$ nos esquecemos da estrutura de composição de morfismos existente na categoria original.
\end{exem}

Nosso interesse é investigar a existência de um funtor no sentido contrário $\mathsf{Alj} \to \mathsf{Cat}$ que associa a cada aljava uma categoria onde podemos compor formalmente suas arestas da forma mais simples possível.
A existência de tal funtor está ligada à existência de categorias livres gerados por aljavas que definimos agora.

\begin{defin}\label{defin:categoria_livre}
    Dada uma aljava $Q$, uma \textbf{categoria livre gerada por $Q$} é um par $(\mathsf{C},i)$, onde $\mathsf{C}$ é uma categoria pequena, e $i: G \to U(\mathsf{C})$ é um morfismo de aljavas satisfazendo a seguinte propriedade universal: se $\mathsf{D}$ é outra categoria pequena qualquer, e $j: G \to U(\mathsf{D})$ é um morfismo de aljavas, então existe um único funtor $F: \mathsf{C} \to \mathsf{D}$ tal que $U(F) \circ i = j$.
    \begin{displaymath}
        \begin{tikzcd}
            U(\mathsf{C})
            \arrow[r, dashed, "U(F)"]
            & U(\mathsf{D})
            \\ G
            \arrow[u, "i"]
            \arrow[ru, "j" swap]
        \end{tikzcd}
    \end{displaymath}
\end{defin}

Tendo em mãos a definição de uma categoria livre, começaremos a caminhar agora em direção à construção de um modelo explícito para uma categoria livre.
Dado um natural $n \in \mathbb{N}$, denotaremos por $[n]$ o conjunto parcialmente ordenado $\{0 \leq 1 \leq \dotsm \leq n\}$.
Sabemos pelo \cref{exem:aljava_via_relacao} que $[n]$ dá origem a uma alajva que denotaremos também por $[n]$.
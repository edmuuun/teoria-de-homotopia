\input{preamble}

\begin{document}

\maketitle

\section{Categorias modelo}

\begin{defin}
  Seja $\mathsf{M}$ uma categoria localmente pequena, completa e co-completa.
  Uma \textbf{estrutura modelo} em $\mathsf{M}$ consiste de três classes de morfismos $\mathcal{W},\, \mathcal{F},\, \mathcal{C} \subseteq \mathrm{Mor}(\mathsf{M})$ cujos elementos são chamados, respectivamente, \textbf{equivalências fracas}, \textbf{fibrações} e \textbf{cofibrações}, as quais devem satisfazer as seguintes condições:
  \begin{enumerate}
  \item[(M1)] A categoria $\mathsf{M}$ é bicompleta, ou seja, admite todos os limites e colimites indexados por categorias pequenas.
    
  \item[(M2)] (Propriedade 2-de-3) Dados morfismos $f: X \to Y$ e $g: Y \to Z$ em $\mathsf{M}$, se dois dos morfismos do conjunto $\{f,\,g,\, g \circ f\}$ estiverem em $\mathcal{W}$, então o terceiro também deve estar.
    
  \item[(M3)] (Propriedade de retração) Se um morfismo $f: A \to X$ é retração de um outro morfismo $g: B \to Y$, ou seja, se existe um diagrama comutativo como abaixo,
    \begin{displaymath}
      \begin{tikzcd}
        A
        \arrow[r]
        \arrow[d, "f" swap]
        \arrow[rr, bend left=25, "\id_{A}"]
        & B
        \arrow[r]
        \arrow[d, "g"]
        & A
        \arrow[d, "f"]
        \\ X
        \arrow[r]
        \arrow[rr, bend right=25, "\id_{X}" swap]
        & Y
        \arrow[r]
        & X
      \end{tikzcd}
    \end{displaymath}
    e $g$ pertence a $\mathcal{W}$ (ou a $\mathcal{F}$, ou a $\mathcal{C}$), então $f$ também pertence a $\mathcal{W}$ (ou a $\mathcal{F}$, ou a $\mathcal{C}$, respectivamente).
    Em suma, as classes $\mathcal{W}$, $\mathcal{F}$ e $\mathcal{C}$ são fechadas por retrações.
    
  \item[(M4)] (Propriedade de levantamento) Dado um diagrama comutativo como abaixo,
    \begin{displaymath}
      \begin{tikzcd}
        A
        \arrow[r]
        \arrow[d, "i" swap]
        & X
        \arrow[d, "p"]
        \\ B
        \arrow[r]
        & Y
      \end{tikzcd}
    \end{displaymath}
    onde $i$ é uma cofibração, e $p$ é uma fibração; se um dos dois morfismos $i$ ou $p$ é também uma equivalência fraca, então o diagrama admite um levantamento, ou seja, existe um morfismo $f: B \to X$ que faz comutar o diagrama abaixo.
    \begin{displaymath}
      \begin{tikzcd}
        A
        \arrow[r]
        \arrow[d, "i" swap]
        & X
        \arrow[d, "p"]
        \\ B
        \arrow[r]
        \arrow[ru, dashed, "f" description]
        & Y
      \end{tikzcd}
    \end{displaymath}
    
  \item[(M5)] (Propriedade de fatoração) Qualquer morfismo $f: X \to Y$ em $\mathsf{M}$ pode ser fatorado nas duas formas mostradas abaixo,
    \begin{displaymath}
      \begin{tikzcd}
        X
        \arrow[rr, "f"]
        \arrow[rd, "i" swap]
        & & Y
        \\ & \widehat{X}
        \arrow[ru, "p" swap]
      \end{tikzcd}
      \qquad
      \begin{tikzcd}
        X
        \arrow[rr, "f"]
        \arrow[rd, "j" swap]
        & &
        Y
        \\ & \widetilde{Y}
        \arrow[ru, "q" swap]
      \end{tikzcd}
    \end{displaymath}
    onde $p$ é simultaneamente uma fibração e uma equivalência fraca, enquanto $j$ é simultaneamente uma cofibração e uma equivalência fraca.
  \end{enumerate}
\end{defin}

Vamos introduzir um pouco de terminologia antes de fazermos alguns comentários sobre a definição acima.
Os morfismos de $\mathsf{M}$ que pertencem à classe $\mathcal{W} \cap \mathcal{F}$ são chamados de \textbf{fibrações triviais} ou \textbf{fibrações acíclicas}, enquanto os morfismos que pertencem à classe $\mathcal{W} \cap \mathcal{C}$ são chamados de \textbf{cofibrações triviais} ou \textbf{cofibrações acíclicas}.
Usando essa terminologia o axioma de fatoração (M5) pode ser enunciado da seguinte forma: todo morfismo em uma categoria modelo pode ser fatorado como uma cofibração seguido de uma fibração trivial, ou como uma cofibração trivial seguido de uma fibração.

\begin{obs}\label{obs:axioma_retracao_explicacao}
  Lembremos que, dados objetos $X$ e $Y$ de uma categoria $\mathsf{C}$ qualquer, dizemos que $X$ é um \textbf{retrato} de $Y$ se existem morfismos $s: X \to Y$ e $r: Y \to X$ tais que $r \circ s = \id_{X}$.
  Comumente nos referimos ao morfismo $s$ por \textbf{seção} e ao morfismo $r$ por \textbf{retração}.
  A condição $r \circ s = \id_{X}$ garante que $s$ seja um monomorfismo.
  De fato, se $f,\, g: W \to X$ são morfismos tais que $s \circ f = s \circ g$, então
  \begin{displaymath}
    f
    = \id_{X} \circ f
    = r \circ s \circ f
    = r \circ s \circ g
    = \id_{X} \circ g
    = g.
  \end{displaymath}
  Isso nos permite encarar $X$ como um subobjeto de $Y$, e o morfismo $r$ então intuitivamente deforma $Y$ para esse subobjeto, mas de forma a mantê-lo fixado.
  Note que a condição $r \circ s = \id_{X}$ garante também que o morfismo $r$ seja um epimorfismo.

  A noção de retração que aparece no axioma (M3) de uma estrutura modelo enunciado acima pode ser interpretada nesse sentido em uma categoria adequada.
  Lembremos que toda categoria $\mathsf{C}$ dá origem a uma categoria de setas $\Arr(\mathsf{C})$.
  Os objetos dessa categorias são precisamente morfismos $f: A \to B$ na categoria incial $\mathsf{C}$, e dados dois tais objetos $f: A \to B$ e $g: X \to Y$, um morfismo do tipo $(f: A \to B) \to (g: X \to Y)$ na categoria de setas $\Arr(\mathsf{C})$ é dado por um par de morfismos $(\alpha: A \to X,\, \beta: B \to Y)$ satisfazendo a igualdade $\beta \circ f = g \circ \alpha$.
  Podemos então visualizar esse morfismo em $\Arr(\mathsf{C})$ na forma de um quadrado comutativo como mostrado abaixo.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[d, "f" swap]
      \arrow[r, "\alpha"]
      & X
      \arrow[d, "g"]
      \\ B
      \arrow[r, "\beta" swap]
      & Y
    \end{tikzcd}
  \end{displaymath}
  A composição de morfismos é definida ``colando'' quadrados comutativos adjacentes.
  Mais precisamente, dados três objetos $f: X_{1} \to Y_{1},\, g: X_{2} \to Y_{2}$ e $h: X_{3} \to Y_{3}$ na categoria $\Arr(\mathsf{C})$, e dados também dois morfismos componíveis
  \begin{displaymath}
    (\alpha_{1}: X_{1} \to X_{2},\, \beta_{1}: Y_{1} \to Y_{2}) \qquad (\alpha_{2}: X_{2} \to X_{3},\, \beta_{2}: Y_{2} \to Y_{3}),
  \end{displaymath}
  sua composição é o morfismo
  \begin{displaymath}
    (\alpha_{2}, \beta_{2}) \circ (\alpha_{1},\beta_{1}): (f: X_{1} \to Y_{1}) \to (h: X_{3} \to Y_{3})
  \end{displaymath}
  em $\Arr(\mathsf{C})$ definido pelo par
  \begin{displaymath}
    (\alpha_{2},\beta_{2}) \circ (\alpha_{1},\beta_{1}) \coloneqq (\alpha_{2} \circ \alpha_{1}: X_{1} \to X_{3},\, \beta_{2} \circ \beta_{1}: Y_{1} \to Y_{3}).
  \end{displaymath}
  Essa composição pode também ser visualizada como mostrado abaixo.
  \begin{displaymath}
    \begin{tikzcd}
      X_{1}
      \arrow[d, "f" swap]
      \arrow[r, "\alpha_{1}"]
      & X_{2}
      \arrow[d, "g"]
      \arrow[r, "\alpha_{2}"]
      & X_{3}
      \arrow[d, "h"]
      \\ Y_{1}
      \arrow[r, "\beta_{1}" swap]
      & Y_{2}
      \arrow[r, "\beta_{2}" swap]
      & Y_{3}
    \end{tikzcd}
    \quad \Longrightarrow \quad
    \begin{tikzcd}
      X_{1}
      \arrow[d, "f" swap]
      \arrow[r, "\alpha_{2} \circ \alpha_{1}"]
      & X_{3}
      \arrow[d, "h"]
      \\ Y_{1}
      \arrow[r, "\beta_{2} \circ \beta_{1}" swap]
      & Y_{3}
    \end{tikzcd}
  \end{displaymath}

  A associatividade dessa composição via colagem segue diretamente da associatividade da composição na categoria inicial $\mathsf{C}$.
  Por fim, dado um objeto $f: X \to Y$ qualquer, o morfismo idêntico associado a ele é dado pelo par $\id_{f} \coloneqq (\id_{X},\id_{Y})$, conforme mostrado no quadrado comutativo abaixo.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, "\id_{X}"]
      \arrow[d, "f" swap]
      & X
      \arrow[d, "f"]
      \\ Y
      \arrow[r, "\id_{Y}" swap]
      & Y
    \end{tikzcd}
  \end{displaymath}

  Note agora que, se o objeto $f: A \to B$ é um retrato do objeto $g: X \to Y$ \emph{na categoria de setas $\Arr(\mathsf{M})$}, então por definição existem morfismos $s_{1}: A \to X,\, s_{2}: B \to Y,\, r_{1}: X \to A$ e $r_{2}: Y \to B$ tais que $(r_{1},r_{2}) \circ (s_{1},s_{2}) = \id_{f}$, o que também pode ser expresso pelo diagrama comutativo abaixo.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "s_{1}"]
      \arrow[d, "f" swap]
      \arrow[rr, bend left=45, "\id_{A}"]
      & X
      \arrow[r, "r_{1}"]
      \arrow[d, "g"]
      & A
      \arrow[d, "f"]
      \\ B
      \arrow[r, "s_{2}" swap]
      \arrow[rr, bend right=45, "\id_{B}" swap]
      & Y
      \arrow[r, "r_{2}" swap]
      & B
    \end{tikzcd}
  \end{displaymath}

   Esse é precisamente o diagrama que aparece no axioma de retração na definição de uma estrutura modelo.
  Podemos então reformular tal axioma dizendo que as classes de equivalências fracas, fibrações e cofibrações são todas fechadas por \emph{retrações na categoria de setas $\Arr(\mathsf{C})$}.
\end{obs}

\begin{obs}
  Quando trabalhamos com categorias modelo, no lugar de dizermos explicitamente que um morfismo é uma equivalência fraca, ou uma cofibração, ou uma fibração, simplesmente adornarmos de alguma forma a seta que representa o morfismo em questão.
  A convenção notacional que seguiremos nesse aspecto é a seguinte:
  \begin{itemize}
  \item uma equivalência fraca será denotada por $\overset{\sim}{\rightarrow}$;
    
  \item uma cofibração será denotada por $\cofib$;
    
  \item uma fibração será denotada por $\fib$.
  \end{itemize}
  Também denotaremos cofibrações ou fibrações trivias por uma combinação dos símbolos acima:
  \begin{itemize}
  \item uma cofibração trivial será denotada por $\overset{\sim}{\cofib}$;
    
  \item uma fibração trivial será denotada por $\overset{\sim}{\fib}$.
  \end{itemize}

  Seguindo essa convenção notacional, podemos, por exemplo, enunciar o axioma de levantamento (M4) da seguinte forma: em uma categoria modelo, todo quadrado comutativo da forma
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d, tail, "i" swap, "\sim" sloped]
      & X
      \arrow[d, two heads, "p"]
      \\ B
      \arrow[r]
      & Y
    \end{tikzcd}
  \end{displaymath}
  admite um levantamento $f: B \to X$
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d, tail, "i" swap, "\sim" sloped]
      & X
      \arrow[d, two heads, "p"]
      \\ B
      \arrow[r]
      \arrow[ru, dashed, "f" description]
      & Y,
    \end{tikzcd}
  \end{displaymath}
  e todo quadrado comutativo da forma
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d, "i" swap]
      & X
      \arrow[d, two heads, "\sim" {swap, sloped}, "p"]
      \\ B
      \arrow[r]
      & Y
    \end{tikzcd}
  \end{displaymath}
  admite um levantamento $f: B \to X$
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d, "i" swap]
      & X
      \arrow[d, two heads, "\sim" {swap, sloped}, "p"]
      \\ B
      \arrow[r]
      \arrow[ru, dashed, "f" description]
      & Y.
    \end{tikzcd}
  \end{displaymath}

  Usando a mesma convenção, o axioma de fatoração (M5) pode ser enunciado da seguinte maneira: em uma categoria modelo, todo morfismo $f: X \to Y$ possui duas fotarações como mostrado abaixo.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[rr, "f"]
      \arrow[rd, tail, "i" swap]
      & & Y
      \\ & \widehat{X}
      \arrow[ru, two heads, "p" {swap}, "\sim" {sloped}]
    \end{tikzcd}
    \qquad
    \begin{tikzcd}
      X
      \arrow[rr, "f"]
      \arrow[rd, tail, "j" {swap}, "\sim" {sloped}]
      & & Y
      \\ & \widetilde{Y}
      \arrow[ru, two heads, "q" swap]
    \end{tikzcd}
  \end{displaymath}
\end{obs}

\subsection{Fatorações em categorias}

Antes de investigarmos mais a fundo as propriedades de categorias modelo, vamos investigar parte de sua estrutura sob uma perspectiva mais geral.
O ponto central da discussão é que a definição de uma categoria modelo pode ser encapsulada totalmente pela existência de fatorações em cofibrações e fibrações que estão relacionadas por condições de levantamento.

Inicialmente, definimos a noção de levantamento de forma mais geral.

\begin{defin}
  Sejam $\mathsf{C}$ uma categoria e $\mathcal{A} \subseteq \Mor(\mathsf{C})$ uma classe qualquer de morfismos.
  Dizemos que um morfismo $f: A \to B$ em $\mathsf{C}$ \textbf{satisfaz a propriedade de levantamento à esquerda com relação a $\mathcal{A}$} se todo quadrado comutativo como abaixo,
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d, "f" swap]
      & X
      \arrow[d, "p"]
      \\ B
      \arrow[r]
      & Y
    \end{tikzcd}
  \end{displaymath}
  onde $p: X \to Y$ pertence a $\mathcal{A}$, admite um levantamento, ou seja, existe um morfismo $h: B \to X$ que faz comutar o diagrama abaixo.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d, "f" swap]
      & X
      \arrow[d, "p"]
      \\ B
      \arrow[r]
      \arrow[ru, dashed, "h" description]
      & Y
    \end{tikzcd}
  \end{displaymath}

  Dualmente, dizemos que um morfismo $g: X \to Y$ \textbf{satisfaz a propriedade de levantamento à direita com relação a $\mathcal{A}$} se todo quadrado comutativo como abaixo,
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[d, "i" swap]
      \arrow[r]
      & X
      \arrow[d, "g"]
      \\ B
      \arrow[r]
      & Y
    \end{tikzcd}
  \end{displaymath}
  onde $i: A \to B$ pertence a $\mathcal{A}$, admite um levantamento $h: B \to X$ como mostrado abaixo.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d, "i" swap]
      & X
      \arrow[d, "g"]
      \\ B
      \arrow[r]
      \arrow[ru, dashed, "h" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
\end{defin}

Tendo a definição acima em mãos, podemos formular uma noção categórica de fatoração geral o suficiente para englobar a situação que aparece no estudo de categorias modelo.

\begin{defin}
  Um \textbf{sistema de fatoração fraco} em uma categoria $\mathsf{C}$ consiste de um par $(\mathcal{L},\mathcal{R})$, onde $\mathcal{L},\, \mathcal{R} \subseteq \Mor(\mathsf{C})$ são duas classes de morfismos, satisfazendo as seguintes condições:
  \begin{enumerate}
  \item[(i)] Todo morfismo $f \in \Mor(\mathsf{C})$ pode ser escrito na forma $f = f_{L} \circ f_{R}$ com $f_{L} \in \mathcal{L}$ e $f_{R} \in \mathcal{R}$;
    \begin{displaymath}
      \begin{tikzcd}[column sep=1.25cm]
        X
        \arrow[r, "f_{L} \in \mathcal{L}"]
        \arrow[rr, bend right=20, "f" swap]
        & Y
        \arrow[r, "f_{R} \in \mathcal{R}"]
        & Z
      \end{tikzcd}
    \end{displaymath}
    
  \item[(ii)] $\mathcal{L}$ consiste precisamente dos morfismos de $\mathsf{C}$ que satisfazem a propriedade de levantamente à esquerda com relação a $\mathcal{R}$;
    
  \item[(iii)] $\mathcal{R}$ consiste precisamente dos morfismos de $\mathsf{C}$ que satisfazem a propriedade de levantamento à direita com relação a $\mathcal{L}$.
  \end{enumerate}
\end{defin}

Os principais exemplos de sistemas de fatoração fracos nos quais estaremos interessados envolvem as cofibrações e fibrações triviais em uma categoria modelo, embora talves ainda não seja claro como essas classes dão origem a um sistema de fatoração.
Antes de detalharmos esse exemplo, entretanto, vamos demonstrar algumas propriedades gerais de sistemas de fatoração fracos.

\begin{prop}
  Suponha que $(\mathcal{L},\mathcal{R})$ seja um sistema de fatoração fraco em uma categoria $\mathsf{C}$.
  Valem as seguintes propriedades:
  \begin{enumerate}
  \item Ambas as classes contêm todos os isomorfismos de $\mathsf{C}$.
    
  \item Ambas as classes são fechadas por composição.
    
  \item Ambas as classes são fechadas por retratos na categoria de setas $\Arr(\mathsf{C})$.
    
  \item $\mathcal{L}$ é fechada pela formação de pushouts, enquanto $\mathcal{R}$ é fechada pela formação de pullbacks.
  \end{enumerate}
\end{prop}

%TODO: Eu provavelmente deveria numerar alguns diagramas nessa demonstração e então referenciá-los nas sequências de igualdades a fim de tornar a demonstração mais fácil de acompanhar.

\begin{proof}
  1. Suponha que $f: A \to B$ seja um isomorfismo.
  Sabemos da definição de sistema de fatoração fraco que $\mathcal{L}$ consiste precisamente dos morfismos de $\mathsf{C}$ que satisfazem a propriedade de levantamento à esquerda com relação a $\mathcal{R}$.
  Considere então um quadrado comutativo como abaixo, onde $g: X \to Y$ é um morfismo pertencente à classe $\mathcal{R}$.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X
      \arrow[d, "g"]
      \\ B
      \arrow[r, "\beta" swap]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Sendo $f$ um isomorfismo por hipótese, podemos considerar o morfismo inverso $f^{-1}: B \to A$, e definir então um morfismo $h: B \to X$ por meio da composição $h \coloneqq \alpha \circ f^{-1}$.
  Note então que por um lado
  \begin{displaymath}
    h \circ f
    = \alpha \circ f^{-1} \circ f
    = \alpha \circ \id_{A}
    = \alpha,
  \end{displaymath}
  e por outro
  \begin{displaymath}
    g \circ h
    = g \circ \alpha \circ f^{-1}
    = \beta \circ f \circ f^{-1}
    = \beta \circ \id_{B}
    = \beta;
  \end{displaymath}
  mostando que $h$ faz comutar o diagrama abaixo, definindo então um levantamento para o quadrado comutativo original.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X
      \arrow[d, "g"]
      \\ B
      \arrow[r, "\beta" swap]
      \arrow[ru, dashed, "h" description]
      & Y
    \end{tikzcd}
  \end{displaymath}

  A demonstração de que $\mathcal{R}$ contém todos os isomorfismos é análoga.
  Se $g: X \to Y$ é um isomorfismo, considere o quadrado comutativo abaixo onde $f: A \to B$ pertence à classe $\mathcal{L}$.
  \begin{displaymath}
     \begin{tikzcd}
      A
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X
      \arrow[d, "g"]
      \\ B
      \arrow[r, "\beta" swap]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Dessa vez definimos um morfismo $h: B \to Y$ pela composição $h \coloneqq g^{-1} \circ \beta$, e notamos que esse morfismo satisfaz a igualdade
  \begin{displaymath}
    g \circ h
    = g \circ g^{-1} \circ \beta
    = \id_{Y} \circ \beta
    = \beta,
  \end{displaymath}
  e também a igualdade
  \begin{displaymath}
    h \circ f
    = g^{-1} \circ \beta \circ f
    = g^{-1} \circ g \circ \alpha
    = \id_{X} \circ \alpha
    = \alpha;
  \end{displaymath}
  portanto $h$ define um levantamento neste caso também.

  \smallskip
  2. Suponha que $f_{1}: A \to B$ e $f_{2}: B \to C$ sejam dois morfismos pertencentes à classe $\mathcal{L}$.
  A fim de mostrarmos que sua composição $f_{2} \circ f_{1}: A \to C$ também pertence a $\mathcal{L}$, vamos mostrar que essa composição satisfaz a condição de levantamento à esquerda com relação à $\mathcal{R}$.
  Considere então um quadrado comutativo como abaixo, onde $g: X \to Y$ pertence à classe $\mathcal{R}$.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "\alpha"]
      \arrow[d, "f_{2} \circ f_{1}" swap]
      & X
      \arrow[d, "g"]
      \\ C
      \arrow[r, "\beta" swap]
      & Y
    \end{tikzcd}
  \end{displaymath}
  A partir do quadrado acima podemos obter o quadrado comutativo mostrado abaixo, o qual admite um levantamento $h_{1}: B \to Y$ pois $f_{1} \in \mathcal{L}$.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "\alpha"]
      \arrow[d, "f_{1}" swap]
      & X
      \arrow[d, "g"]
      \\ B
      \arrow[r, "\beta \circ f_{2}" swap]
      \arrow[ru, dashed, "h_{1}" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Usando o levantamento $h_{1}$ obtemos um terceiro quadrado comutativo como mostrado abaixo, o qual admite um levantamento $h_{2}: C \to X$ pois $f_{2} \in \mathcal{L}$.
  \begin{displaymath}
    \begin{tikzcd}
      B
      \arrow[r, "h_{1}"]
      \arrow[d, "f_{2}" swap]
      & X
      \arrow[d, "g"]
      \\ C
      \arrow[r, "\beta" swap]
      \arrow[ru, dashed, "h_{2}" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Afirmamos que $h_{2}: C \to X$ define também um levantamento para o quadrado comutativo considerado inicialmente.
  De fato, por um lado a igualade $g \circ h_{2} = \beta$ segue diretamente da comutatividade do último quadrado acima, e por outro temos a sequência de igualdades
  \begin{displaymath}
    h_{2} \circ f_{2} \circ f_{1} = h_{1} \circ f_{1} = \alpha;
  \end{displaymath}
  portanto $h_{2}$ satisfaz as condições de comutatividades necessárias.

  A demonstração da segunda parte é análoga.
  Suponha que $g_{1}: X \to Y$ e $g_{2}: Y \to Z$ sejam dois morfismos pertencentes à classe $\mathcal{R}$, e considere o quadrado comutativo abaixo, onde $f: A \to B$ pertence à classe $\mathcal{L}$.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X
      \arrow[d, "g_{2} \circ g_{1}"]
      \\ B
      \arrow[r, "\beta" swap]
      & Z
    \end{tikzcd}
  \end{displaymath}
  Considere então o quadrado comutativo abaixo, o qual admite um levantamento $h_{2}: B \to Y$ pois $g_{2}$ pertence a $\mathcal{R}$.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "g_{1} \circ \alpha"]
      \arrow[d, "f" swap]
      & Y
      \arrow[d, "g_{2}"]
      \\ B
      \arrow[r, "\beta" swap]
      \arrow[ru, dashed, "h_{2}" description]
      & Z
    \end{tikzcd}
  \end{displaymath}
  Usando $h_{2}$ consideramos então o quadrado comutativo abaixo, o qual também admite um levantamento $h_{1}: B \to X$ pois $g_{1} \in \mathcal{R}$.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X
      \arrow[d, "g_{1}"]
      \\ B
      \arrow[r, "h_{2}" swap]
      \arrow[ru, dashed, "h_{1}" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
  O morfismo $h_{1}$ é precisamente o procurado, já que por um lado a igualdade $h_{1} \circ f = \alpha$ segue diretamente da comutatividade acima, e por outro temos a sequência de igualdades
  \begin{displaymath}
    g_{2} \circ g_{1} \circ h_{1} = g_{2} \circ h_{2} = \beta;
  \end{displaymath}
  mostrando então que $h_{1}$ define um levantamento para o quadrado comutativo inicial.

  \smallskip
  3. Suponha que o morfismo $f: A \to B$ seja um retrato do morfismo $g: X \to Y$ o qual pertence à classe $\mathcal{L}$.
  Temos então por definição o diagrama comutativo abaixo
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "s_{1}"]
      \arrow[d, "f" swap]
      \arrow[rr, bend left=45, "\id_{A}"]
      & X
      \arrow[r, "r_{1}"]
      \arrow[d, "g"]
      & A
      \arrow[d, "f"]
      \\ B
      \arrow[r, "s_{2}" swap]
      \arrow[rr, bend right=45, "\id_{B}" swap]
      & Y
      \arrow[r, "r_{2}" swap]
      & B
    \end{tikzcd}
  \end{displaymath}
  A fim de mostrarmos que $f$ também pertence a $\mathcal{L}$, considere o quadrado comutativo abaixo onde $p: P \to Q$ é um morfismo qualquer da classe $\mathcal{R}$.
  \begin{displaymath}
    \begin{tikzcd}
      A
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & P
      \arrow[d, "p"]
      \\ B
      \arrow[r, "\beta" swap]
      & Q
    \end{tikzcd}
  \end{displaymath}
  A partir deste quadrado e do diagrama anterior produzimos o quadrado comutativo, o qual admite um levantamento $h: Y \to P$ já que $g \in \mathcal{L}$ por hipótese.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, "\alpha \circ r_{1}"]
      \arrow[d, "g" swap]
      & P
      \arrow[d, "p"]
      \\ Y
      \arrow[r, "\beta \circ r_{2}" swap]
      \arrow[ru, dashed, "h" description]
      & Q
    \end{tikzcd}
  \end{displaymath}
  Afirmamos então que o morfismo $H: B \to P$ dado pela composição $H \coloneqq h \circ s_{2}$ define um levantamento para o quadrado inicial.
  De fato, por um lado temos
  \begin{displaymath}
    H \circ f = h \circ s_{2} \circ f = h \circ g \circ s_{1} = \alpha \circ r_{1} \circ s_{1} = \alpha \circ \id_{A} = \alpha,
  \end{displaymath}
  e por outro temos também
  \begin{displaymath}
    p \circ H = p \circ h \circ s_{2} = \beta \circ r_{2} \circ s_{2} = \beta \circ \id_{B} = \beta.
  \end{displaymath}

  Supondo ainda que $f$ seja um retrato de $g$, considere agora o caso em que $g$ pertence à classe $\mathcal{R}$.
  A fim de mostrarmos que $f$ também pertence a $\mathcal{R}$, considere o quadrado comutativo abaixo onde $j: M \to N$ é um morfismo qualquer da classe $\mathcal{L}$.
  \begin{displaymath}
    \begin{tikzcd}
      M
      \arrow[r, "\varphi"]
      \arrow[d, "j" swap]
      & A
      \arrow[d, "f"]
      \\ N
      \arrow[r, "\psi" swap]
      & B
    \end{tikzcd}
  \end{displaymath}
  A partir disso obtemos o quadrado comutativo abaixo, o qual admite um levantamento $h: N \to X$ pois $g$ pertence à classe $\mathcal{R}$ por hipótese.
  \begin{displaymath}
    \begin{tikzcd}
      M
      \arrow[r, "s_{1} \circ \varphi"]
      \arrow[d, "j" swap]
      & X
      \arrow[d, "g"]
      \\ N
      \arrow[r, "s_{2} \circ \psi" swap]
      \arrow[ru, dashed, "h" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Afirmamos então que $H: N \to A$ definido por $H \coloneqq r_{1} \circ h$ é o levantamento procurado para o quadrado considerado inicialmente.
  De fato, por um lado temos as igualdades
  \begin{displaymath}
    H \circ j = r_{1} \circ h \circ j = r_{1} \circ s_{1} \circ \varphi = \id_{A} \circ \varphi = \varphi,
  \end{displaymath}
  e por outro temos também as igualdades
  \begin{displaymath}
    f \circ H = f \circ r_{1} \circ h = r_{2} \circ g \circ h = r_{2} \circ s_{2} \circ \psi = \id_{B} \circ \psi = \psi.
  \end{displaymath}

  \smallskip
  4. Suponha que $f: X_{1} \to Y_{1}$ pertença a $\mathcal{L}$ e que o quadrado comutativo abaixo seja um pushout em $\mathsf{C}$.
  \begin{displaymath}
    \begin{tikzcd}
      X_{1}
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X_{2}
      \arrow[d, "g"]
      \\ Y_{1}
      \arrow[r, "\beta" swap]
      & Y_{2}
    \end{tikzcd}
  \end{displaymath}
  Nosso objetivo é mostrar que então $g$ também pertence a $\mathcal{L}$, e com esse intuito consideramos o problema de levantamento abaixo, onde $p: P \to Q$ é um morfismo qualquer na classe $\mathcal{R}$.
  \begin{displaymath}
    \begin{tikzcd}
      X_{2}
      \arrow[r, "\varphi"]
      \arrow[d, "g" swap]
      & P
      \arrow[d, "p"]
      \\ Y_{2}
      \arrow[r, "\psi" swap]
      & Q
    \end{tikzcd}
  \end{displaymath}
  Note primeiro que o quadrado comutativo abaixo admite um levantamento $h: Y_{1} \to P$ pois $f \in \mathcal{L}$ por hipótese.
  \begin{displaymath}
    \begin{tikzcd}
      X_{1}
      \arrow[r, "\varphi \circ \alpha"]
      \arrow[d, "f" swap]
      & P
      \arrow[d, "p"]
      \\ Y_{1}
      \arrow[r, "\psi \circ \beta" swap]
      \arrow[ru, dashed, "h" description]
      & Q
    \end{tikzcd}
  \end{displaymath}
  A igualdade $h \circ f = \varphi \circ \alpha$ nos permite então usar a hipótese de que temos um pushout para obtermos um morfismo $H: Y_{2} \to P$ que faz comutar todo o diagrama abaixo.
  \begin{displaymath}
     \begin{tikzcd}
      X_{1}
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X_{2}
      \arrow[d, "g"]
      \arrow[rdd, bend left=30, "\varphi"]
      \\ Y_{1}
      \arrow[r, "\beta" swap]
      \arrow[rrd, bend right=30, "h" swap]
      & Y_{2}
      \arrow[rd, dashed, "H" description]
      \\ & & P
    \end{tikzcd}
  \end{displaymath}
  Afirmamos que o morfismo $H$ obtido dessa maneira é o levantamento procurado.
  Note primeiro que a igualdade $H \circ g = \varphi$ segue imediatamente da comutatividade acima.
  Já a igualdade $p \circ H = \psi$ requer um pouco mais de trabalho.
  Repare com carinho que estes dois morfismos fazem comutar o diagrama abaixo,
  \begin{displaymath}
    \begin{tikzcd}
      X_{1}
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X_{2}
      \arrow[d, "g"]
      \arrow[rdd, bend left=30, "p \circ \varphi"]
      \\ Y_{1}
      \arrow[r, "\beta" swap]
      \arrow[rrd, bend right=30, "\psi \circ \beta" swap]
      & Y_{2}
      \arrow[rd, shift left=1.2, "\psi"]
      \arrow[rd, shift right=1.2, "p \circ H" swap]
      \\ & & Q
    \end{tikzcd}
  \end{displaymath}
  mas como o quadrado que aparece neste diagrama é um pushout, sua propriedade universal garante que existe um único morfismo do tipo $Y_{2} \to Q$ que faça tudo comutar, portanto deve valer a igualdade $p \circ H = \psi$.

  A demonstração de que morfismos em $\mathcal{R}$ são preservados por pullbacks é novamente análoga.
  Suponha agora que o quadrado comutativo abaixo seja um pullback e que o morfismo $g: X_{2} \to Y_{2}$ seja pertence a $\mathcal{R}$.
  \begin{displaymath}
    \begin{tikzcd}
      X_{1}
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X_{2}
      \arrow[d, "g"]
      \\ Y_{1}
      \arrow[r, "\beta" swap]
      & Y_{2}
    \end{tikzcd}
  \end{displaymath}
  A fim de mostrarmos que $f$ também pertence a $\mathcal{R}$, consideramos o problema de levantamento abaixo, onde $j: M \to N$ é um morfismo qualquer pertencente à classe $\mathcal{L}$.
  \begin{displaymath}
    \begin{tikzcd}
      M
      \arrow[r, "\varphi"]
      \arrow[d, "j" swap]
      & X_{1}
      \arrow[d, "f"]
      \\ N
      \arrow[r, "\psi" swap]
      & Y_{1}
    \end{tikzcd}
  \end{displaymath}
  Colando estes dois quadrados obtemos o quadrado comutativo abaixo, o qual admite um levantamento $h: N \to X_{2}$ pois $g \in \mathcal{R}$ por hipótese.
  \begin{displaymath}
    \begin{tikzcd}
      M
      \arrow[r, "\alpha \circ \varphi"]
      \arrow[d, "j" swap]
      & X_{2}
      \arrow[d, "g"]
      \\ N
      \arrow[r, "\beta \circ \psi" swap]
      \arrow[ru, dashed, "h" description]
      & Y_{2}
    \end{tikzcd}
  \end{displaymath}
  A estratégia para obtermos um morfismo do tipo $N \to X_{1}$ é usarmos a propriedade universal do pullback.
  A igualdade $h \circ j = \alpha \circ \varphi$ implicada pela comutatividade acima diz que a ``camada externa'' do diagrama abaixo comuta, portanto segue da propriedade universal do pullback que existe um único morfismo do tipo $H: N \to X_{1}$ fazendo comutar o diagrama todo.
  \begin{displaymath}
    \begin{tikzcd}
      N
      \arrow[rd, dashed, "H" description]
      \arrow[rdd, bend right=30, "\psi" swap]
      \arrow[rrd, bend left=30, "h"]
      \\ & X_{1}
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X_{2}
      \arrow[d, "g"]
      \\ & Y_{1}
      \arrow[r, "\beta" swap]
      & Y_{2}
    \end{tikzcd}
  \end{displaymath}

  Resta mostrarmos que $H$ é o levantamento procurado para o quadrado comutativo inicial.
  A igualdade $f \circ H = \psi$ segue imediatamente da comutatividade acima.
  Analogamente ao que ocorreu no caso do pushout, a fim de mostrarmos que a igualdade $H \circ j = \varphi$ também vale, precisamos utilizar a unicidade na propriedade universal do pullback.
  Ambos os morfismos $H \circ j$ e $\varphi$ fazem comutar o diagrama abaixo,
  \begin{displaymath}
    \begin{tikzcd}
      M
      \arrow[rd, shift left=1.2, "H \circ j"]
      \arrow[rd, shift right=1.2, "\varphi" swap]
      \arrow[rrd, bend left=30, "\alpha \circ \varphi"]
      \arrow[rdd, bend right=30, "f \circ \varphi" swap]
      \\ & X_{1}
      \arrow[r, "\alpha"]
      \arrow[d, "f" swap]
      & X_{2}
      \arrow[d, "g"]
      \\ & Y_{1}
      \arrow[r, "\beta" swap]
      & Y_{2}
    \end{tikzcd}
  \end{displaymath}
  mas a propriedade universal do pullback garante a existência de um único morfismo do tipo $M \to X_{1}$ fazendo comutar o diagrama acima, de onde podemos concluímos enfim que a igualdade $H \circ j = \varphi$ deve ser verdadeira.
\end{proof}

Agora mostramos como podemos usar a estrutura de uma categoria modelo para construirmos enfim exemplos um pouco mais concretos de sistemas de fatoração fracos.

\begin{prop}
  Suponha que $(\mathsf{M},\mathcal{W},\mathcal{C},\mathcal{F})$ seja uma categoria modelo.
  As seguintes afirmações são verdadeiras:
  \begin{enumerate}
  \item $(\mathcal{C} \cap \mathcal{W},\mathcal{F})$ define um sistema de fatoração fraco em $\mathsf{M}$;
    
  \item $(\mathcal{C},\mathcal{F} \cap \mathcal{W})$ define um sistema de fatoração fraco em $\mathsf{M}$.
  \end{enumerate}
\end{prop}

\begin{proof}
  1. O axioma de fatoração (M5) garante que, dado qualquer morfismo $f: X \to Y$ em $\mathsf{M}$, existe uma cofibração trivial $j: X \overset{\sim}{\cofib} \widetilde{Y}$ e uma fibração $q: \widetilde{Y} \fib Y$ que fatoram $f$ como indicado abaixo.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, tail, "j", "\sim" {swap}]
      \arrow[rr, bend right=30, "f" swap]
      & \widetilde{Y}
      \arrow[r, two heads, "q"]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Isso significa que o par de classes de morfismos $(\mathcal{C} \cap \mathcal{W}, \mathcal{F})$ satisfaz a primeira condição de um sistema de fatoração fraco.

  Resta mostrarmos que $\mathcal{C} \cap \mathcal{W}$ e $\mathcal{F}$ definem um ao outro por meio de propriedades de levantamento.
  Note que o axioma de levantamento (M4) garante que toda fibração satisfaz a propriedade de levantamento à direita com relação à classe $\mathcal{C} \cap \mathcal{W}$ das cofibrações triviais.
  Reciprocamente, suponha que $f: X \to Y$ satisfaça a propriedade de levantamento à direita com relação à classe das cofibrações triviais.
  Queremos mostrar que isso garante que $f$ seja uma fibração, e como o únicos axiomas que temos para lidar com fibrações são os de retração e fatoração, não é surpresa que a estratégia da demonstração seja combinarmos esses dois axiomas com a hipótese de levantamento sobre $f$.

  Usando o axioma de fatoração podemos obter uma cofibração trivial $j: X \overset{\sim}{\cofib} \widetilde{Y}$ e uma fibração $q: \widetilde{Y} \fib Y$ tais que $f = q \circ j$.
  Essa igualdade também pode ser expressa em termos do quadrado comutativo abaixo, o qual admite um levantamento $h: \widetilde{Y} \to X$ já que $f$ satisfaz a propriedade de levantamento à direita com relação às cofibrações triviais.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, "\id_{X}"]
      \arrow[d, tail, "j" {swap}, "\sim" {sloped}]
      & X
      \arrow[d, "f"]
      \\ \widetilde{Y}
      \arrow[r, two heads, "q" swap]
      \arrow[ru, dashed, "h" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Podemos organizar estes morfismos todos no diagrama comutativo mostrado abaixo,
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, tail, "j", "\sim" {swap}]
      \arrow[d, "f" swap]
      \arrow[rr, bend left=45, "\id_{X}"]
      & \widetilde{Y}
      \arrow[r, "h"]
      \arrow[d, two heads, "q"]
      & X
      \arrow[d, "f"]
      \\ Y
      \arrow[r, "\id_{Y}" swap]
      \arrow[rr, bend right=45, "\id_{Y}" swap]
      & Y
      \arrow[r, "\id_{Y}" swap]
      & Y
    \end{tikzcd}
  \end{displaymath}
  o qual mostra que $f$ é uma retração da fibração $q$ na categoria de setas $\Arr(\mathsf{M})$ e, portanto, uma fibração também.

  Vejamos agora a descrição das cofibrações triviais em termos das fibrações.
  Note inicialmente que o axioma de levantamento (M4) mais uma vez já garante que toda cofibração trivial satisfaz a propriedade de levantamento à esquerda com relação à classe de fibrações, a questão aqui é mostrar que essa propriedade de levantamento \emph{caracteriza} as cofibrações triviais.
  Suponha então que $f: X \to Y$ satisfaça a propriedade de levantamento à esquerda com relação às fibrações.
  Como a classe $\mathcal{C} \cap \mathcal{W}$ é fechada por retrações, pois tanto $\mathcal{C}$ quanto $\mathcal{W}$ o são, basta mostrarmos que $f$ é uma retração de uma cofibração trivial.
  Novamente consideramos a fatoração abaixo em termos de uma cofibração trivial seguida de uma fibração.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, "j" {swap}, "\sim"]
      \arrow[rr, bend left=30, "f"]
      & \widetilde{Y}
      \arrow[r, two heads, "q" swap]
      & Y
    \end{tikzcd}
  \end{displaymath}

  A condição $f = q \circ j$ pode ser expressa em termos do quadrado comutativo abaixo, e tal quadrado admite um levantamento $h: Y \to \widetilde{Y}$ pois $f$ por hipótese satisfaz a condição de levantamento à esquerda com relação às fibrações.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[d, "f" swap]
      \arrow[r, tail, "j", "\sim" {swap}]
      & \widetilde{Y}
      \arrow[d, two heads, "q"]
      \\ Y
      \arrow[r, "\id_{Y}" swap]
      \arrow[ru, dashed, "h" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Os morfismos todos em questão podem então ser combinados no diagrama comutativo abaixo que expressa $f$ como uma retração da cofibração trivial $j$ como queríamos.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, "\id_{X}"]
      \arrow[rr, bend left=45, "\id_{X}"]
      \arrow[d, "f" swap]
      & X
      \arrow[d, tail, "j", "\sim" {swap, sloped}]
      \arrow[r, "\id_{X}"]
      & X
      \arrow[d, "f"]
      \\ Y
      \arrow[r, "h" swap]
      \arrow[rr, bend right=45, "\id_{Y}" swap]
      & \widetilde{Y}
      \arrow[r, two heads, "q" swap]
      & Y
    \end{tikzcd}
  \end{displaymath}

  \smallskip
  2. Novamente pelo axioma de fatoração (M5) podemos fatorar um morfismo $f: X \to Y$ qualquer de $\mathsf{M}$ da forma indicada abaixo.
  \begin{equation}
    \label{eq:fatoracao_cofib_fib_triv}
    \begin{tikzcd}
      X
      \arrow[r, tail, "i" swap]
      \arrow[rr, bend left=45, "f"]
      & \widehat{X}
      \arrow[r, two heads, "p" {swap}, "\sim"]
      & Y
    \end{tikzcd}
  \end{equation}
  Em outras palavras, o par $(\mathcal{C}, \mathcal{F} \cap \mathcal{W})$ satisfaz a primeira condição na definição de sistema de fatoração fraco.
  Resta verificarmos que as classes se definem mutuamente em termos de propriedades de levantamento.

  Inicialmente, sabemos do axioma de levantamento (M4) que toda cofibração satisfaz a propriedade de levantamento à esquerda com relação à classe das fibrações triviais.
  Suponha agora que $f: X \to Y$ satisfaça tal propriedade de levantamento, e vamos então mostrar que $f$ é necessariamente uma cofibração trivial também, o que como nos dois casos anteriores será feito por meio do axioma de retração.
  A condição $f = p \circ i$ pode ser expressa pela comutatividade do quadrado abaixo, e a condição de levantamento sobre $f$ nos permite obter o mapa $h: Y \to \widehat{X}$ indicado.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, tail, "i"]
      \arrow[d, "f" swap]
      & \widehat{X}
      \arrow[d, two heads, "p", "\sim" {swap, sloped}]
      \\ Y
      \arrow[r, "\id_{Y}" swap]
      \arrow[ru, dashed, "h" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Usando os morfismos à disposição construímos o diagrama abaixo expressando $f$ como uma retração da cofibração $i$, de onde concluímos que $f$ é também uma cofibração.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, "\id_{X}"]
      \arrow[d, "f" swap]
      \arrow[rr, bend left=45, "\id_{X}"]
      & X
      \arrow[r, "\id_{X}"]
      \arrow[d, tail, "i"]
      & X
      \arrow[d, "f"]
      \\ Y
      \arrow[r, "h" swap]
      \arrow[rr, bend right=45, "\id_{Y}" swap]
      & \widehat{X}
      \arrow[r, two heads, "p" {swap}, "\sim"]
      & Y
    \end{tikzcd}
  \end{displaymath}

  Por fim, resta apenas mostrarmos que as fibrações triviais são precisamente os morfismos satisfazendo a condição de levantamento à direita com relação às cofibrações.
  O axioma de levantamento (M4) nos diz que toda fibração trivial satisfaz tal propriedade de levantamento, a questão é justamente a recíproca.
  Suponha então que $f: X \to Y$ satisfaça essa propriedade também, e seguindo a notação da fatoração em \eqref{eq:fatoracao_cofib_fib_triv}, considere o quadrado comutativo abaixo, e o mapa $h: \widehat{X} \to X$ obtido da hipótese feita sobre $f$.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, "\id_{X}"]
      \arrow[d, tail, "i" swap]
      & X
      \arrow[d, "f"]
      \\ \widehat{X}
      \arrow[r, two heads, "p" {swap}, "\sim"]
      \arrow[ru, dashed, "h" description]
      & Y
    \end{tikzcd}
  \end{displaymath}
  Como o leitor já há muito deve ter previsto, combinando todos esses ingredientes obtemos o diagrama comutativo abaixo exibindo $f$ como uma retração da fibração trivial $p$, o que nos permite concluir enfim que $f$ é também uma fibração trivial.
  \begin{displaymath}
    \begin{tikzcd}
      X
      \arrow[r, tail, "i"]
      \arrow[d, "f" swap]
      \arrow[rr, bend left=45, "\id_{X}"]
      & \widehat{X}
      \arrow[r, "h"]
      \arrow[d, two heads, "p", "\sim" {swap,sloped}]
      & X
      \arrow[d, "f"]
      \\ Y
      \arrow[r, "\id_{Y}" swap]
      \arrow[rr, bend right=45, "\id_{Y}" swap]
      & Y
      \arrow[r, "\id_{Y}" swap]
      & Y
    \end{tikzcd} \qedhere
  \end{displaymath}
\end{proof}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
